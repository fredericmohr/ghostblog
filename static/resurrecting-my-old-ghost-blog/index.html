
<head>
    <title>HashtagSecurity</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="wot-verification" content="06cd687a47e37736daed"> 
    <link rel="stylesheet" type="text/css" href="../assets/css/mofirst-min.css?v=8ff1f2e80d">
    <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script> <!-- disqus loader needs latest jquery -->
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="HashtagSecurity">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Resurrecting my old ghost blog">
    <meta property="og:description" content="How I resurrected my old ghost blog to bring it back to its former glory. ">
    <meta property="og:url" content="fredericmohr.github.io/ghostblog/resurrecting-my-old-ghost-blog/">
    <meta property="og:image" content="fredericmohr.github.io/ghostblog/content/images/2019/06/15-4.png">
    <meta property="article:published_time" content="2019-06-14T08:29:11.000Z">
    <meta property="article:modified_time" content="2019-06-14T08:30:00.000Z">
    <meta property="article:tag" content="ghost">
    <meta property="article:tag" content="linux">
    <meta property="article:tag" content="node">
    <meta property="article:tag" content="old">
    <meta property="article:tag" content="rescue">
    <meta property="article:tag" content="blog">
    <meta property="article:tag" content="move">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Resurrecting my old ghost blog">
    <meta name="twitter:description" content="How I resurrected my old ghost blog to bring it back to its former glory. ">
    <meta name="twitter:url" content="fredericmohr.github.io/ghostblog/resurrecting-my-old-ghost-blog/">
    <meta name="twitter:image" content="fredericmohr.github.io/ghostblog/content/images/2019/06/15-4.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Frederic Mohr">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="ghost, linux, node, old, rescue, blog, move">
    <meta property="og:image:width" content="1286">
    <meta property="og:image:height" content="627">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "HashtagSecurity",
        "logo": {
            "@type": "ImageObject",
            "url": "fredericmohr.github.io/ghostblog/content/images/2014/Oct/tw-logo_400x400-1.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Frederic Mohr",
        "url": "fredericmohr.github.io/ghostblog/author/frederic/",
        "sameAs": []
    },
    "headline": "Resurrecting my old ghost blog",
    "url": "fredericmohr.github.io/ghostblog/resurrecting-my-old-ghost-blog/",
    "datePublished": "2019-06-14T08:29:11.000Z",
    "dateModified": "2019-06-14T08:30:00.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "fredericmohr.github.io/ghostblog/content/images/2019/06/15-4.png",
        "width": 1286,
        "height": 627
    },
    "keywords": "ghost, linux, node, old, rescue, blog, move",
    "description": "How I resurrected my old ghost blog to bring it back to its former glory. ",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "fredericmohr.github.io/ghostblog/"
    }
}
    </script>

    <script src="../public/ghost-sdk.min.js?v=8ff1f2e80d"></script>
<script>
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "5a567477c5aa"
});
</script>
    <meta name="generator" content="Ghost 2.23">
    <link rel="alternate" type="application/rss+xml" title="HashtagSecurity" href="../rss/index.html">
</head>
<body>
<!--NAVIGATION-->
<div class="nav_bar">
	<div class="nav_container">	
		<ul class="nav">
			<li id="nav-index"><a href="../" class="icon-home"></a></li>
			<li id="nav-kalibook"><a href="../getting-started-with-kali-linux/" class="icon-book"></a></li>
			<li id="nav-about"><a href="../about/" class="icon-info"></a></li>
		</ul>

		<!-- Follow Me -->
		<div class="follow_me">
			<a href="https://twitter.com/HashtagSecurity" title="Twitter"><img alt="twitter" src="../assets/images/twi.png?v=8ff1f2e80d"></a>
			<a href="https://www.hashtagsecurity.com/rss" title="RSS"><img alt="rss" src="../assets/images/rss.png?v=8ff1f2e80d"></a>
		</div>
	</div>
</div>
<div class="navline"></div>
<!-- End Header -->
<div class="outer_container">
	<!-- PAGE -->
	<div class="page_container">
		<!-- CONTENT -->
		<div class="post_container">
			    <article class="post tag-ghost-tag tag-linux tag-node tag-old tag-rescue tag-blog tag-move featured">


        <h1 class="post-title">Resurrecting my old ghost blog</h1>
		<span class="post-meta"><a href="http://de.linkedin.com/in/fredericmohr"><b>Frederic Mohr</b></a> - <time datetime="2019-06-14">14 Jun 2019</time> on <a href="../tag/ghost-tag/">ghost</a> | <a href="../tag/linux/">linux</a> | <a href="../tag/node/">node</a> | <a href="../tag/old/">old</a> | <a href="../tag/rescue/">rescue</a> | <a href="../tag/blog/">blog</a> | <a href="../tag/move/">move</a></span>

        <section class="post-content">
            <!--kg-card-begin: markdown--><p><img src="../content/images/2019/06/15-3.png" alt="15-3"><br>
Ghost (CMS) is nice and I've used it for a couple years but with the start of my company my blog got less attention, got broke and went offline, never to be fixed. In summary, running ghost yourself is work. Not necessarily a ton of work but work nontheless.</p>
<p>So I decided to resurrect my old blog and move it to a fully hosted platform. My decision fell on blogger as it is completely free, plays nice with Google Analytics and SEO (being a Google product) and has a couple of notable changes since its early days - most importantly, better themes and the ability to custom style them.</p>
<p>My first issue was, that my old ghost powered blog wasn't online anymore so I had to get it up and running again, in order to copy the old content to the new platform. Luckily, I still have the raw setup files from <code>/var/www/</code> and the most recent database backup.</p>
<p>Since the original server was in an unusable state (and running Ubuntu 14.04!), I decided to run the resurrection ritual on a local virtual machine.</p>
<p>First thing to notice here: I'm currently running Windows 10 instead of my usual Kubuntu setup, so I was first considering using Putty to SSH into my VM. I then decided to give the SSH feature in Windows a try and lo and behold, it is a beaut.</p>
<p><img src="../content/images/2019/06/1-1.png" alt="1-1"></p>
<p>Thanks to this nifty little feature, I can use both scp and ssh directly from a Powershell window.</p>
<p>I copied the files over to my machine, which is running on a NAT interface with port-forwarding, hence the port 2222 on localhost. Once the copy job was done, I set out to install the most important packages to get started.</p>
<pre><code>fmohr@vm$ sudo apt install unzip nodejs npm mysql-server
</code></pre>
<p>Now with the bare necessities in place, it was time to restore the database to its former glory.</p>
<pre><code>fmohr@host:~/$ scp -P 2222 .\ghostdb.sql fmohr@localhost:~/
</code></pre>
<p><img src="../content/images/2019/06/2-1.png" alt="2-1"></p>
<pre><code>fmohr@vm:~/$ sudo mysql -u root &lt; ghostdb.sql
</code></pre>
<p><img src="../content/images/2019/06/3-1.png" alt="3-1"><br>
Success! I can now try to adjust the ghost settings file and start the nodejs server.</p>
<pre><code>fmohr@vm:~/$ vi config.js
</code></pre>
<p><img src="../content/images/2019/06/4-1.png" alt="4-1"></p>
<p>Of course I had to change the database connection, namely: host, user and password from the live environment to my local test machine.</p>
<p>In order to even try and run the server, the necessary dependency packages need to be installed. It becomes pretty clear early on, that this ghost installation hasn't been updated in a while.</p>
<pre><code>fmohr@vm:~/ghost$ npm install
</code></pre>
<p><img src="../content/images/2019/06/5-1.png" alt="5-1"></p>
<p>Unfortunately, all this brought me was a bunch of error messages.</p>
<p><img src="../content/images/2019/06/6-1.png" alt="6-1"></p>
<p>Trying to run the server first gave me this error:</p>
<p><img src="../content/images/2019/06/7-1.png" alt="7-1"></p>
<p>After a bit of Google-fu I half found out, half remembered that the NODE_ENV variable had to be set in order to use the production settings from the config.js file.</p>
<p><img src="../content/images/2019/06/8-1.png" alt="8-1"></p>
<p>This resulted in a different error. Two steps forward, one backwards.</p>
<p><img src="../content/images/2019/06/9-1.png" alt="9-1"></p>
<p>Stackoverflow to the rescue! The solution was to downgrade the mysql authentication method.</p>
<pre><code>fmohr@vm:~/ghost$ mysql -u root -p
mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'HelloKitty123';
mysql&gt; FLUSH PRIVILEGES;
</code></pre>
<p><img src="../content/images/2019/06/10-1.png" alt="10-1"></p>
<p>Well, this certainly got rid of the mysql authentication error but spawned a new one. Luckily there is a solution for everything. And once again, its name is downgrade. This is best done by using NVM, the node version manager.</p>
<pre><code>fmohr@vm:~/ghost$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh -o install.sh
fmohr@vm:~/ghost$ less install.sh
fmohr@vm:~/ghost$ sudo bash install.sh
</code></pre>
<p>The <a href="https://blog.karmacomputing.co.uk/upgrading-from-old-ghost-to-ghost-1-x/">originally suggested command</a> for installing NVM was the following:</p>
<pre><code>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash 
</code></pre>
<p>You may have noticed that I changed the procedure. Since this is a security focused blog, let me quickly explain why.</p>
<p>Spoiler: Never pipe unknown shell scripts to bash. NEVER! Ever! EVAAA!<br>
The following commands install the most recent node version as well as the desired one.</p>
<pre><code>fmohr@vm:~/ghost$ nvm install node
fmohr@vm:~/ghost$ nvm install 0.10.45 
</code></pre>
<p><img src="../content/images/2019/06/11-1.png" alt="11-1"></p>
<p>This allows me to try and run ghost again. This time with the (presumably) correct version of node.</p>
<pre><code>NODE_ENV=production ~/.nvm/v0.10.45/bin/node index.js
</code></pre>
<p><img src="../content/images/2019/06/12-1.png" alt="12-1"></p>
<p>It works, even if the message is incorrect as the server cannot possibly run on the public domain name. This is easily solved with netstat.</p>
<p><img src="../content/images/2019/06/13-1.png" alt="13-1"></p>
<p>And with another port forwarding rule for my VM, this should be accessible as well.</p>
<p><img src="../content/images/2019/06/14-1.png" alt="14-1"></p>
<p>Look at it. It runs so smoothly, I almost want to keep using ghost. But that would mean installing updates and maintaining my own server and I've grown lazy, apparently.</p>
<p><img src="../content/images/2019/06/15-3.png" alt="15-3"></p>
<p>This is it for today, how I will move this content to <s>blogger</s> is a story for another time. :)</p>
<!--kg-card-end: markdown-->
	
        </section>

<br>
<hr>
<br>
	<!-- START DISQUS IMPLEMENTATION -->
        <script src="/assets/js/disqus.js?v=8ff1f2e80d&gt;&lt;/script&gt;%0A%20%20%20%20%20%20%20%20&lt;div%20id=" disqus_thread></script></article></div>
        <!--<div class="post_disqus show-comments" title="Privacy: Click to enable Disqus (uses cookies!)"><b>Enable Disqus</b></div>
	END DISQUS IMPLEMENTATION -->



		</div>

		<!-- SIDEBAR -->
		<div class="side_container">

			<div class="side_sub_one well">
				<b>Note</b>
				<div class="side_sub_hl_blue"></div>
				<p>All information provided on this site is for educational purposes only. The site and it's author is in no way responsible for any misuse of the information.</p>
			</div>
			<div class="side_sub_one well">
				<b>Links</b>
				<div class="side_sub_hl_blue"></div>
				<p>
				<a href="../random-notes/">Random Notes and CheatSheets</a><br>
				</p><hr>
				<a href="http://learnpythonthehardway.org/book/">Python the hard way</a><br>
				<a href="http://cspplayground.com">CSP Playground</a><br>
				<a href="http://www.offensive-security.com/metasploit-unleashed/Main_Page">Metasploit Unleashed</a><br>
				<hr>
				<a href="https://www.linkedin.com/profile/view?id=203397467">Me - LinkedIn</a><br>
				<a href="https://ctftime.org/team/9072">Me - CTFTime.org</a><br>
				
			</div>		
			<div class="side_sub_one well">
				<b>Blogs</b>
				<div class="side_sub_hl_blue"></div>
				<p>
				<a href="http://wearetheartillery.blogspot.com.es/">WeAreTheArtillery</a><br>
				<a href="https://www.imperialviolet.org">Imperial Violet</a><br>
				<a href="http://www.nerd-supreme.de">NerdSupreme (DE)</a><br>
				<a href="http://krebsonsecurity.com/">KrebsOnSecurity</a><br>
				<a href="https://www.corelan.be/">Corelan Team</a><br>
				<a href="http://blog.g0tmi1k.com/">G0tmi1k</a><br>
				</p>
			</div>		
			<div class="side_sub_one well">
				<b>Reddits</b>
				<div class="side_sub_hl_blue"></div>
				<p>
				<a href="http://www.reddit.com/r/netsec/">/r/netsec</a><br>
				<a href="http://www.reddit.com/r/Python/">/r/Python</a><br>
				<a href="http://www.reddit.com/r/Defcon/">/r/Defcon</a><br>
				<a href="http://www.reddit.com/r/securityCTF/">/r/securityCTF</a><br>
				<a href="index.html"></a><br>
				</p>
			</div>		
		</div>
	</div> <!-- End of Sidebar -->

	<div class="footer">
	<div class="navline"></div>
		HashtagSecurity<br><small>... keeping security in mind.<br><a href="../impressum">Impressum</a> | <a href="../datenschutzerklarung">Datenschutzerklärung</a> | <a href="../privacy-policy">Privacy Policy</a></small>
	</div>
</body>
